import"../chunks/Bzak7iHL.js";import{p as I,o as J,f as w,s as n,i as K,a as c,b as L,$ as M,c as m,r as u,d as P,t as Q,j as p,g as r,n as R}from"../chunks/QZqinZsw.js";import{d as U,s as B}from"../chunks/zj6rKiBI.js";import{i as A}from"../chunks/CBp_iadw.js";import{h as W}from"../chunks/DA21FyIS.js";import{s as V}from"../chunks/DNnZok11.js";import{s as X,a as Z}from"../chunks/D8TCchut.js";import{p as aa}from"../chunks/CBOsyq4N.js";import{S as sa}from"../chunks/DRbgy62_.js";const ea=(x,o,l,i,f,y,a)=>{r(o,!0),r(l,"Sending...");let d=i==null?void 0:i.email;d&&f.auth.resetPasswordForEmail(d,{redirectTo:`${y().url.origin}/auth/callback?next=%2Faccount%2Fsettings%2Freset_password`}).then(v=>{r(a,!v.error,!0),r(o,!1),r(l,"Send Forgot Password Email")})};var ta=w(`<div class="font-bold">Set Password By Email</div> <div>You use oAuth to sign in ("Sign in with Github" or similar). You can
          continue to access your account using only oAuth if you like!</div>`,1),oa=w('<div class="font-bold">Change Password By Email</div>'),ia=w(`<div class="card p-6 pb-7 mt-8 max-w-xl flex flex-col md:flex-row shadow-sm max-w-md"><div class="flex flex-col gap-y-4"><!> <div> </div> <button> </button> <div>Sent email! Please check your inbox and use the link to set your
        password.</div></div></div>`),ra=w('<h1 class="text-2xl font-bold mb-6">Change Password</h1> <!>',1);function va(x,o){var $,k;I(o,!0);const l=()=>Z(aa,"$page",i),[i,f]=X();J("adminSection").set("settings");let{user:a,supabase:d}=o.data,v=!!(($=a==null?void 0:a.amr)!=null&&$.find(s=>s.method==="password")),N=!!((k=a==null?void 0:a.amr)!=null&&k.find(s=>s.method==="oauth")),S=P(!1),C=P("Send Set Password Email"),h=P(!1);var T=ra();W(s=>{M.title="Change Password"});var O=n(K(T),2);{var Y=s=>{sa(s,{title:"Change Password",editable:!0,saveButtonTitle:"Change Password",successTitle:"Password Changed",successBody:"On next sign in, use your new password.",formTarget:"/account/api?/updatePassword",fields:[{id:"newPassword1",label:"New Password",initialValue:"",inputType:"password"},{id:"newPassword2",label:"Confirm New Password",initialValue:"",inputType:"password"},{id:"currentPassword",label:"Current Password",initialValue:"",inputType:"password"}]})},j=s=>{var g=ia(),E=m(g),F=m(E);{var G=t=>{var _=ta();R(2),c(t,_)},q=t=>{var _=oa();c(t,_)};A(F,t=>{N?t(G):t(q,!1)})}var b=n(F,2),z=m(b);u(b);var e=n(b,2);e.__click=[ea,S,C,a,d,l,h];var D=m(e,!0);u(e);var H=n(e,2);u(E),u(g),Q(()=>{B(z,`The button below will send you an email at ${(a==null?void 0:a.email)??""} which will allow
        you to set your password.`),V(e,1,`btn btn-outline btn-wide ${p(h)?"hidden":""}`),e.disabled=p(S),B(D,p(C)),V(H,1,`success alert alert-success ${p(h)?"":"hidden"}`)}),c(s,g)};A(O,s=>{v?s(Y):s(j,!1)})}c(x,T),L(),f()}U(["click"]);export{va as component};
